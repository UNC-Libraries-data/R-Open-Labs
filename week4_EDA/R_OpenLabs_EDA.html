<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="University of North Carolina at Chapel Hill">

<title>beginR: Exploratory Data Analysis (EDA)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="R_OpenLabs_EDA_files/libs/clipboard/clipboard.min.js"></script>
<script src="R_OpenLabs_EDA_files/libs/quarto-html/quarto.js"></script>
<script src="R_OpenLabs_EDA_files/libs/quarto-html/popper.min.js"></script>
<script src="R_OpenLabs_EDA_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="R_OpenLabs_EDA_files/libs/quarto-html/anchor.min.js"></script>
<link href="R_OpenLabs_EDA_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="R_OpenLabs_EDA_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="R_OpenLabs_EDA_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="R_OpenLabs_EDA_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="R_OpenLabs_EDA_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#data-and-other-downloads" id="toc-data-and-other-downloads" class="nav-link active" data-scroll-target="#data-and-other-downloads">Data and other downloads</a></li>
  <li><a href="#reminders-and-notes" id="toc-reminders-and-notes" class="nav-link" data-scroll-target="#reminders-and-notes">Reminders and Notes:</a>
  <ul class="collapse">
  <li><a href="#start-a-new-project-in-r" id="toc-start-a-new-project-in-r" class="nav-link" data-scroll-target="#start-a-new-project-in-r">Start a New Project in R</a></li>
  <li><a href="#note-tibbles-vs-data-frames" id="toc-note-tibbles-vs-data-frames" class="nav-link" data-scroll-target="#note-tibbles-vs-data-frames">Note: Tibbles vs Data Frames</a></li>
  </ul></li>
  <li><a href="#what-is-exploratory-data-analysis" id="toc-what-is-exploratory-data-analysis" class="nav-link" data-scroll-target="#what-is-exploratory-data-analysis">What is Exploratory Data Analysis?</a></li>
  <li><a href="#what-do-we-have---dim-str-and-summary" id="toc-what-do-we-have---dim-str-and-summary" class="nav-link" data-scroll-target="#what-do-we-have---dim-str-and-summary">What do we have? - <code>dim</code>, <code>str</code>, and <code>summary</code></a>
  <ul class="collapse">
  <li><a href="#note-indexing" id="toc-note-indexing" class="nav-link" data-scroll-target="#note-indexing">Note: Indexing</a></li>
  <li><a href="#str-and-summary-with-indexing" id="toc-str-and-summary-with-indexing" class="nav-link" data-scroll-target="#str-and-summary-with-indexing"><code>str</code> and <code>summary</code> (with Indexing)</a></li>
  </ul></li>
  <li><a href="#frequency---univariate-eda" id="toc-frequency---univariate-eda" class="nav-link" data-scroll-target="#frequency---univariate-eda">Frequency - Univariate EDA</a>
  <ul class="collapse">
  <li><a href="#categorical-variables" id="toc-categorical-variables" class="nav-link" data-scroll-target="#categorical-variables">Categorical Variables</a></li>
  <li><a href="#continuous-variables" id="toc-continuous-variables" class="nav-link" data-scroll-target="#continuous-variables">Continuous Variables</a></li>
  <li><a href="#outliers" id="toc-outliers" class="nav-link" data-scroll-target="#outliers">Outliers</a></li>
  </ul></li>
  <li><a href="#covariation---two-or-more-variables" id="toc-covariation---two-or-more-variables" class="nav-link" data-scroll-target="#covariation---two-or-more-variables">Covariation - Two or more variables</a>
  <ul class="collapse">
  <li><a href="#continuous-vs-continuous" id="toc-continuous-vs-continuous" class="nav-link" data-scroll-target="#continuous-vs-continuous">Continuous vs Continuous</a></li>
  </ul></li>
  <li><a href="#categorical-vs-categorical" id="toc-categorical-vs-categorical" class="nav-link" data-scroll-target="#categorical-vs-categorical">Categorical vs Categorical</a></li>
  <li><a href="#categorical-vs-continuous" id="toc-categorical-vs-continuous" class="nav-link" data-scroll-target="#categorical-vs-continuous">Categorical vs Continuous</a></li>
  <li><a href="#review" id="toc-review" class="nav-link" data-scroll-target="#review">Review</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">beginR: Exploratory Data Analysis (EDA)</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>University of North Carolina at Chapel Hill </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="data-and-other-downloads" class="level2">
<h2 class="anchored" data-anchor-id="data-and-other-downloads">Data and other downloads</h2>
<p><a href="data/Boston_listings.csv">Boston AirBnB Data</a></p>
</section>
<section id="reminders-and-notes" class="level2">
<h2 class="anchored" data-anchor-id="reminders-and-notes">Reminders and Notes:</h2>
<section id="start-a-new-project-in-r" class="level3">
<h3 class="anchored" data-anchor-id="start-a-new-project-in-r">Start a New Project in R</h3>
<p>It is best practice to set up a new directory each time we start a new project in R. To do so, complete the following steps:</p>
<ol type="1">
<li>Go to <strong>File &gt; New Project &gt; New Directory &gt; New Project</strong>.</li>
<li>Type in a name for your directory and click <strong>Browse</strong>. Be sure to pick a place for your directory that you will be able to <strong>find later</strong>.</li>
<li>Go to <strong>Finder</strong> on Mac or <strong>File Explorer</strong> on PC and find the directory you just created.</li>
<li>Inside your project directory, create a new folder called <strong>data</strong>.</li>
<li>Download or copy the <strong>data file</strong> (Boston_listings.csv) into the data folder.</li>
<li>Go to <strong>File &gt; Save As</strong> to give your R script a name and save it in your project directory.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>listings <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/Boston_listings.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="note-tibbles-vs-data-frames" class="level3">
<h3 class="anchored" data-anchor-id="note-tibbles-vs-data-frames">Note: Tibbles vs Data Frames</h3>
<p>Most <code>tidyverse</code> functions, including <code>read_csv</code>, output tibble objects. A dataset stored as a tibble will return <code>tbl</code> and <code>tbl_df</code> in its <code>class</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(listings)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "spec_tbl_df" "tbl_df"      "tbl"         "data.frame" </code></pre>
</div>
</div>
<p>A <code>tbl_df</code> prints different details than a traditional <code>data.frame</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(listings)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 36
     id listing_url     neighbourhood neighbourhood_cleansed city  state zipcode
  &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;         &lt;chr&gt;                  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  
1  3781 https://www.ai… East Boston   East Boston            Bost… MA    2128   
2  5506 https://www.ai… Roxbury       Roxbury                Bost… MA    2119   
3  6695 https://www.ai… Roxbury       Roxbury                Bost… MA    2119   
4  6976 https://www.ai… Roslindale    Roslindale             Bost… MA    2131   
5  8789 https://www.ai… Beacon Hill   Downtown               Bost… MA    2108   
6  8792 https://www.ai… Beacon Hill   Downtown               Bost… MA    2108   
# ℹ 29 more variables: latitude &lt;dbl&gt;, longitude &lt;dbl&gt;, property_type &lt;chr&gt;,
#   room_type &lt;chr&gt;, accommodates &lt;dbl&gt;, bathrooms &lt;dbl&gt;, bedrooms &lt;dbl&gt;,
#   beds &lt;dbl&gt;, bed_type &lt;chr&gt;, price &lt;dbl&gt;, security_deposit &lt;dbl&gt;,
#   cleaning_fee &lt;dbl&gt;, guests_included &lt;dbl&gt;, extra_people &lt;chr&gt;,
#   minimum_nights &lt;dbl&gt;, maximum_nights &lt;dbl&gt;, number_of_reviews &lt;dbl&gt;,
#   first_review &lt;chr&gt;, last_review &lt;chr&gt;, review_scores_rating &lt;dbl&gt;,
#   review_scores_accuracy &lt;dbl&gt;, review_scores_cleanliness &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>In some cases, when using packages outside the <code>tidyverse</code>, we can avoid or fix problems by converting a <code>tbl_df</code> into a <code>data.frame</code> with <code>as.data.frame</code>. Note that <code>head</code> prints <strong>all</strong> columns of the dataset and does not specify the datatype of each column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>listings.df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(listings)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(listings.df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(listings.df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    id                       listing_url neighbourhood neighbourhood_cleansed
1 3781 https://www.airbnb.com/rooms/3781   East Boston            East Boston
2 5506 https://www.airbnb.com/rooms/5506       Roxbury                Roxbury
3 6695 https://www.airbnb.com/rooms/6695       Roxbury                Roxbury
4 6976 https://www.airbnb.com/rooms/6976    Roslindale             Roslindale
5 8789 https://www.airbnb.com/rooms/8789   Beacon Hill               Downtown
6 8792 https://www.airbnb.com/rooms/8792   Beacon Hill               Downtown
    city state zipcode latitude longitude property_type       room_type
1 Boston    MA    2128 42.36524 -71.02936     Apartment Entire home/apt
2 Boston    MA    2119 42.32981 -71.09559   Guest suite Entire home/apt
3 Boston    MA    2119 42.32994 -71.09351   Condominium Entire home/apt
4 Boston    MA    2131 42.29244 -71.13577     Apartment    Private room
5 Boston    MA    2108 42.35919 -71.06265     Apartment Entire home/apt
6 Boston    MA    2108 42.35850 -71.06201     Apartment Entire home/apt
  accommodates bathrooms bedrooms beds bed_type price security_deposit
1            2         1        1    1 Real Bed   125                0
2            2         1        1    1 Real Bed   145                0
3            4         1        1    2 Real Bed   169               NA
4            2         1        1    1 Real Bed    65                0
5            2         1        1    1 Real Bed    99             1000
6            2         1        1    1 Real Bed   154             1000
  cleaning_fee guests_included extra_people minimum_nights maximum_nights
1           75               2        $0.00             30           1125
2           40               1        $0.00              3            730
3           70               2        $8.00              3            730
4            0               1       $20.00              3             60
5          150               1        $0.00             14            365
6          250               1        $0.00             20            365
  number_of_reviews first_review last_review review_scores_rating
1                14    7/10/2015    7/2/2018                   99
2                71    3/21/2009    9/3/2018                   95
3                75     8/6/2009   8/26/2018                   96
4                68    7/19/2009   7/31/2018                   98
5                18    8/12/2014   8/27/2018                   91
6                24   10/11/2009   8/15/2018                   93
  review_scores_accuracy review_scores_cleanliness review_scores_checkin
1                     10                        10                    10
2                     10                        10                    10
3                     10                        10                    10
4                     10                         9                    10
5                      9                         9                    10
6                     10                         9                    10
  review_scores_communication review_scores_location review_scores_value
1                          10                     10                  10
2                          10                      9                  10
3                          10                      9                   9
4                          10                      9                  10
5                          10                     10                   9
6                          10                     10                   9
          cancellation_policy calculated_host_listings_count reviews_per_month
1             super_strict_30                              2              0.36
2 strict_14_with_grace_period                              6              0.61
3 strict_14_with_grace_period                              6              0.68
4                    moderate                              1              0.61
5 strict_14_with_grace_period                             11              0.36
6 strict_14_with_grace_period                             11              0.22</code></pre>
</div>
</div>
</section>
</section>
<section id="what-is-exploratory-data-analysis" class="level2">
<h2 class="anchored" data-anchor-id="what-is-exploratory-data-analysis">What is Exploratory Data Analysis?</h2>
<p>Exploratory Data Analysis (EDA) is the process of exploring your data, focused on discovering patterns rather than statistical testing. <a href="http://r4ds.had.co.nz/exploratory-data-analysis.html"><em>R for Data Science</em></a> breaks this down into three steps:</p>
<blockquote class="blockquote">
<ol type="1">
<li>Generate questions about your data.</li>
<li>Search for answers by visualizing, transforming and modelling your data.</li>
<li>Use what your learn to refine your questions and/or generate new questions.</li>
</ol>
</blockquote>
<p>This process can be repeated many times.</p>
</section>
<section id="what-do-we-have---dim-str-and-summary" class="level2">
<h2 class="anchored" data-anchor-id="what-do-we-have---dim-str-and-summary">What do we have? - <code>dim</code>, <code>str</code>, and <code>summary</code></h2>
<p>Before we start asking questions of our dataset, we need to determine the basic contents of the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(listings)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5957   36</code></pre>
</div>
</div>
<p>We have 36 variables (columns) across 5957 observations (rows).</p>
<section id="note-indexing" class="level3">
<h3 class="anchored" data-anchor-id="note-indexing">Note: Indexing</h3>
<p>In R, we can use square brackets, <code>[]</code>, to quickly select a subset of rows and/or columns by position using numeric indices. Unlike some programming languages, R starts counting positions at 1 instead of zero.</p>
<p>For example, if we want to look at row 5, column 3 of our listings data frame, we can do it like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>listings[<span class="dv">5</span>,<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  neighbourhood
  &lt;chr&gt;        
1 Beacon Hill  </code></pre>
</div>
</div>
<p>There are a number of different ways we can use indexing to subset our data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>listings[,<span class="dv">1</span>] <span class="co"># column 1</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>listings[,<span class="dv">7</span><span class="sc">:</span><span class="dv">10</span>] <span class="co"># columns 7 through 10</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>listings[,<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">8</span>,<span class="dv">11</span>)] <span class="co"># columns 1, 8 and 11</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>listings[<span class="dv">2</span>,] <span class="co"># row 2</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>listings[<span class="dv">3</span><span class="sc">:</span><span class="dv">9</span>,] <span class="co"># rows 3 through 9</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>listings[<span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">10</span>),] <span class="co"># rows 7 and 10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>For a vector, we only need one number to describe position:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>myvec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"a"</span>,<span class="st">"b"</span>,<span class="st">"c"</span>,<span class="st">"d"</span>,<span class="st">"e"</span>,<span class="st">"f"</span>,<span class="st">"g"</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>myvec</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a" "b" "c" "d" "e" "f" "g"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>myvec[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>myvec[<span class="dv">4</span><span class="sc">:</span><span class="dv">7</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "d" "e" "f" "g"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>myvec[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">7</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "a" "c" "g"</code></pre>
</div>
</div>
</section>
<section id="str-and-summary-with-indexing" class="level3">
<h3 class="anchored" data-anchor-id="str-and-summary-with-indexing"><code>str</code> and <code>summary</code> (with Indexing)</h3>
<p>We can use <code>str</code> and <code>summary</code> to learn more about each of these 36 variables. We’ll use indexing to get results for only the first four columns with <code>str</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(listings[,<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [5,957 × 4] (S3: tbl_df/tbl/data.frame)
 $ id                    : num [1:5957] 3781 5506 6695 6976 8789 ...
 $ listing_url           : chr [1:5957] "https://www.airbnb.com/rooms/3781" "https://www.airbnb.com/rooms/5506" "https://www.airbnb.com/rooms/6695" "https://www.airbnb.com/rooms/6976" ...
 $ neighbourhood         : chr [1:5957] "East Boston" "Roxbury" "Roxbury" "Roslindale" ...
 $ neighbourhood_cleansed: chr [1:5957] "East Boston" "Roxbury" "Roxbury" "Roslindale" ...</code></pre>
</div>
</div>
<p>The equivalent way to do this using dplyr and the <code>%&gt;%</code> we learned last week would be:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>listings <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, listing_url, neighbourhood, neighbourhood_cleansed) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>tibble [5,957 × 4] (S3: tbl_df/tbl/data.frame)
 $ id                    : num [1:5957] 3781 5506 6695 6976 8789 ...
 $ listing_url           : chr [1:5957] "https://www.airbnb.com/rooms/3781" "https://www.airbnb.com/rooms/5506" "https://www.airbnb.com/rooms/6695" "https://www.airbnb.com/rooms/6976" ...
 $ neighbourhood         : chr [1:5957] "East Boston" "Roxbury" "Roxbury" "Roslindale" ...
 $ neighbourhood_cleansed: chr [1:5957] "East Boston" "Roxbury" "Roxbury" "Roslindale" ...</code></pre>
</div>
</div>
<p>We’ll use <code>summary</code> with the 5th, 6th, and 12th columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(listings[,<span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">12</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     city              state            accommodates  
 Length:5957        Length:5957        Min.   : 1.00  
 Class :character   Class :character   1st Qu.: 2.00  
 Mode  :character   Mode  :character   Median : 3.00  
                                       Mean   : 3.38  
                                       3rd Qu.: 4.00  
                                       Max.   :16.00  </code></pre>
</div>
</div>
<p>To get the same results using dplyr and the %&gt;%, we could use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>listings <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(city, state, accommodates) <span class="sc">%&gt;%</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     city              state            accommodates  
 Length:5957        Length:5957        Min.   : 1.00  
 Class :character   Class :character   1st Qu.: 2.00  
 Mode  :character   Mode  :character   Median : 3.00  
                                       Mean   : 3.38  
                                       3rd Qu.: 4.00  
                                       Max.   :16.00  </code></pre>
</div>
</div>
</section>
</section>
<section id="frequency---univariate-eda" class="level2">
<h2 class="anchored" data-anchor-id="frequency---univariate-eda">Frequency - Univariate EDA</h2>
<p>A natural starting place for EDA is learning more about individual variables. We’re often interested in the relative frequency of different values of a given variable.</p>
<section id="categorical-variables" class="level3">
<h3 class="anchored" data-anchor-id="categorical-variables">Categorical Variables</h3>
<blockquote class="blockquote">
<p>What types of beds are most popular in Boston AirBnBs?</p>
</blockquote>
<section id="table" class="level4">
<h4 class="anchored" data-anchor-id="table"><code>table</code></h4>
<p><code>table</code> provides a simple frequency table for a categorical (usually factor or character) variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(listings<span class="sc">$</span>bed_type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
       Airbed         Couch         Futon Pull-out Sofa      Real Bed 
           31             5            32            19          5870 </code></pre>
</div>
</div>
<p>Clearly “Real Bed” is the most popular bed type. Interestingly, it appears that Airbeds are more popular than Couches and Pull-out Sofas combined!</p>
</section>
<section id="bar-charts-with-geom_bar" class="level4">
<h4 class="anchored" data-anchor-id="bar-charts-with-geom_bar">Bar Charts with <code>geom_bar</code></h4>
<p>We can also represent categorical variables with a bar chart, using <code>ggplot</code> and <code>geom_bar</code>. By default, <code>geom_bar</code> uses the <code>x</code> aesthetic and provides a count of the frequency of each category across the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">x=</span>bed_type))<span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width=</span><span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<p>Note: Calling <code>fct_infreq</code> will quickly re-arrange our categories to be plotted in frequency order. I’ve also used the <code>width</code> parameter for <code>geom_bar</code> to make the bars half as wide.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">fct_infreq</span>(bed_type)))<span class="sc">+</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">width=</span><span class="fl">0.5</span>)<span class="sc">+</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="continuous-variables" class="level3">
<h3 class="anchored" data-anchor-id="continuous-variables">Continuous Variables</h3>
<blockquote class="blockquote">
<p>What is the distribution of prices for AirBnB listings in Boston?</p>
</blockquote>
<p>Unfortunately, with continuous variables, we usually have too many distinct values to make a table or bar chart useful.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">x=</span>price))<span class="sc">+</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()<span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
<section id="histograms-with-geom_hist" class="level4">
<h4 class="anchored" data-anchor-id="histograms-with-geom_hist">Histograms with <code>geom_hist</code></h4>
<p>A common way to overcome this problem is to bin values into ranges with a histogram.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">x=</span>price))<span class="sc">+</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">100</span>)<span class="sc">+</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>It’s important to note that a histogram can look very different depending on how many ranges or “bins” we use.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>We can plot transformations of the data directly.</p>
<p>For example, it’s common to use a logarithm tranformation with skewed positive data. Let’s look at <span class="math inline">\(log_{10}(price)\)</span> with <code>log10</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log10</span>(price)))<span class="sc">+</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">30</span>)<span class="sc">+</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="boxplots-with-geom_boxplot" class="level4">
<h4 class="anchored" data-anchor-id="boxplots-with-geom_boxplot">Boxplots with <code>geom_boxplot</code></h4>
<p>The boxplot provides another convenient summary of a continuous variable. <code>geom_boxplot</code> requires a <code>y</code> aesthetic instead of an <code>x</code> as in boxplot. Here I’ve used the <code>coord_flip</code> function at the end of my code to flip the X and Y axes to make the output more comprable to our histograms above.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">y=</span>price))<span class="sc">+</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><p>The box of the boxplot ranges from the 25th to the 75th percentile, and therefore contains half of the observed data. The line running down the middle of the box is the median.</p></li>
<li><p>The difference between the 25th and 75th percentiles, the width of the box, is known as the inter-quartile range (IQR).</p></li>
<li><p>The lines extending out to the left and right of the box represent the furthest extent of datapoints that are within 1.5 IQR of the box. Our lower, left-hand, whisker is much shorter becuase AirBnB prices cannot be negative.</p></li>
<li><p>Finally, the points, representing prices from roughly $500 up to roughly $4000 represent outliers.</p></li>
</ul>
</section>
</section>
<section id="outliers" class="level3">
<h3 class="anchored" data-anchor-id="outliers">Outliers</h3>
<p>Outliers are data that are “far” away from your other observations in terms of one or more variables. There are a number of frequently used cutoffs to help identify outliers in continuous variables.</p>
<p>However, there is no fixed rule as to when you should remove an observation you have identified as an outlier. In general, you want to remove observations that aren’t really in the population you’re studying. This includes values that may have been entered in error or produced by malfunctioning sensors or equipment. In other cases, a suprirsing, but accurate, outlying value, can be the most important result. <strong>Observations shouldn’t be removed just because they’re outliers</strong>.</p>
</section>
</section>
<section id="covariation---two-or-more-variables" class="level2">
<h2 class="anchored" data-anchor-id="covariation---two-or-more-variables">Covariation - Two or more variables</h2>
<p>Once we have a handle on single variables in our dataset, we can start hypothesizing about relationships between variables.</p>
<section id="continuous-vs-continuous" class="level3">
<h3 class="anchored" data-anchor-id="continuous-vs-continuous">Continuous vs Continuous</h3>
<blockquote class="blockquote">
<p>Do more expensive properties get more reviews?</p>
</blockquote>
<p>The most common way to explore the interaction between two continuous variables is with a scatterplot, using <code>geom_point</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>listings <span class="sc">%&gt;%</span> </span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(price<span class="sc">&lt;</span><span class="dv">500</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>price,<span class="at">y=</span>number_of_reviews))<span class="sc">+</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid figure-img" width="384"></p>
</figure>
</div>
</div>
</div>
<p>As in many large datasets, we have so many points in certain areas that it can be hard to tell how many observations are actually represented. We can get a better sense of how many observations are in a given area by adding some transparency, using the <code>alpha</code> aesthetic of <code>geom_point</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>listings <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(price<span class="sc">&lt;</span><span class="dv">500</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>price,<span class="at">y=</span>number_of_reviews))<span class="sc">+</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.05</span>)<span class="sc">+</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="384"></p>
</figure>
</div>
</div>
</div>
<p>For comparison, let’s zoom in on the grid where both price and number of reviews are less than 100:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="384"></p>
</figure>
</div>
</div>
</div>
<p>It’s clear from our <code>alpha</code> plot that most of the AirBnBs with price under 100 also have less than 10 reviews.</p>
</section>
</section>
<section id="categorical-vs-categorical" class="level2">
<h2 class="anchored" data-anchor-id="categorical-vs-categorical">Categorical vs Categorical</h2>
<blockquote class="blockquote">
<p>Which room types can accommodate the most people?</p>
</blockquote>
<p>We can use <code>table</code> with two variables to get a quick summary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(listings<span class="sc">$</span>room_type,listings<span class="sc">$</span>accommodates)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                 
                     1    2    3    4    5    6    7    8    9   10   11   12
  Entire home/apt   37  994  591  921  506  378   95  157   26   39    8   26
  Private room     552 1194  125  137   24   10    0    2    1    0    0    0
  Shared room       47   28    4    9    0    0    0    0    0    0    0    0
                 
                    13   14   15   16
  Entire home/apt    4   15    4   22
  Private room       0    0    0    0
  Shared room        0    0    0    1</code></pre>
</div>
</div>
<p>We can represent this graphically in a number of ways. For example, we can use <code>geom_count</code> to plot points sized by frequency. This has the benefit of avoiding overlaping points.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings, <span class="fu">aes</span>(<span class="at">x=</span>accommodates,<span class="at">y=</span>room_type))<span class="sc">+</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_count</span>()<span class="sc">+</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="768"></p>
</figure>
</div>
</div>
</div>
<p>What happens if we use <code>geom_point</code> instead?</p>
</section>
<section id="categorical-vs-continuous" class="level2">
<h2 class="anchored" data-anchor-id="categorical-vs-continuous">Categorical vs Continuous</h2>
<blockquote class="blockquote">
<p>Which room types are the most expensive?</p>
</blockquote>
<p>Let’s continue looking at room types, but lets compare a continous variable, prices, across the categories. Recall that we can use <code>group_by</code> and <code>summarize</code> from last week to get a summary table:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>listings <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(room_type) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_price=</span><span class="fu">mean</span>(price),<span class="at">median_price=</span><span class="fu">median</span>(price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  room_type       mean_price median_price
  &lt;chr&gt;                &lt;dbl&gt;        &lt;dbl&gt;
1 Entire home/apt      237.           199
2 Private room          84.0           70
3 Shared room           80.2           62</code></pre>
</div>
</div>
<p>However, we’ll usually get a better sense of the data with a visualization. When we have a reasonable number of categories, we can spread boxplots across categories by adding an aesthetic for the category.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">y=</span>price,<span class="at">x=</span>room_type))<span class="sc">+</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>We can control the order of boxplots with <code>reorder</code>. <code>reorder(room_type,price,mean)</code> will reorder the categories of room_type based on mean price. Check the help with <code>?reorder</code> for more information.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">y=</span>price,<span class="at">x=</span><span class="fu">reorder</span>(room_type,price,mean)))<span class="sc">+</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Unfortunately, for histograms, we already have counts on the y axis by default, so we’ll use facets instead. Facets allow you to create multiple plots - one for each level of a categorical variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">x=</span>price))<span class="sc">+</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">50</span>)<span class="sc">+</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="at">rows=</span><span class="fu">vars</span>(room_type))<span class="sc">+</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<p>To place several histograms in one overlapping plot, we should to convert the bar representation into lines, to make overlaps easier to see and understand. We’ll use the <code>color</code> aesthetic to separate our categories.</p>
<p>*<code>geom_freqpoly</code> represents each histogram as a line plot through the top of each bar. We’ll use the <code>size</code> parameter for <code>geom_freqpoly</code> to make the lines a little thicker than the default.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">x=</span>price,<span class="at">color=</span>room_type))<span class="sc">+</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><code>geom_density</code> provides a “smoothed” and rescaled version of each histogram. The area under each line is the same, so we lose relative frequency between categories in favor of a better view of relative frequency within each category.
<ul>
<li>The <code>bw</code> parameter controls the extent of smoothing, similar to <code>bins</code> for histograms. Try some other values to see how the plot changes!</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data=</span>listings,<span class="fu">aes</span>(<span class="at">x=</span>price,<span class="at">color=</span>room_type))<span class="sc">+</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">bw=</span><span class="dv">10</span>,<span class="at">size=</span><span class="dv">1</span>)<span class="sc">+</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_OpenLabs_EDA_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="review" class="level2">
<h2 class="anchored" data-anchor-id="review">Review</h2>
<ol type="1">
<li>One Variable</li>
</ol>
<ul>
<li>(Catetgorical) <code>table</code> and <code>geom_bar</code> with <code>x</code> aesthetic</li>
<li>(Continuous) <code>geom_hist</code> with <code>x</code> aesthetic</li>
<li>(Continuous) <code>geom_boxplot</code> with <code>y</code> aesthetic</li>
</ul>
<ol start="2" type="1">
<li>Two Variabes</li>
</ol>
<ul>
<li>(Continuous - Continuous) <code>geom_point</code> with <code>x</code> and <code>y</code> aesthetics</li>
<li>(Categorical - Categorical) <code>table</code> or <code>geom_count</code> with <code>x</code> and <code>y</code> aesthetics</li>
<li>(Categorical - Continuous) + <code>geom_boxplot</code> with <code>y</code> (continuous) and <code>x</code> (categorical) aesthetics + <code>geom_histogram</code> with <code>x</code> (continuous) aesthetic and <code>facet_grid</code> using the categorical variable + <code>geom_freqpoly</code> with <code>x</code> (continuous) and <code>color</code> (categorical) aesthetic + <code>geom_density</code> <code>x</code> (continuous) and <code>color</code> (categorical) aesthetic</li>
</ul>
</section>
<section id="exercises" class="level2">
<h2 class="anchored" data-anchor-id="exercises">Exercises</h2>
<ol type="1">
<li><p>Make a scatterplot of review_scores_rating vs reviews_per_month. Add a best fit linear regression line with <code>geom_smooth</code> (check the help with <code>?geom_smooth</code>, or refer back to <a href="https://unc-libraries-data.github.io/R-Open-Labs/week1_Introduction/R_OpenLabs_Introduction.html">week one</a>)</p></li>
<li><p>Which neighborhoods have the highest median price? Which neighborhoods have the highest variance or largest IQR? Hint: Use <code>neighbourhood_cleansed</code> for neighborhoods.</p></li>
<li><p>Load the built-in dataset <code>mpg</code> with <code>data(mpg)</code>. Use <code>?mpg</code> to learn more about the variables included. Come up with a hypothesis or expectation you have about the data and check it with one of the methods used above.</p></li>
<li><p>Load the built-in dataset <code>msleep</code> with <code>data(msleep)</code>. Use <code>?msleep</code> to learn more about the variables included. Come up with a hypothesis or expectation you have about the data and check it with one of the methods used above. Note: <code>msleep</code> is provided with the <code>ggplot2</code> package, so make sure you have the <code>tidyverse</code> loaded!</p></li>
</ol>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>